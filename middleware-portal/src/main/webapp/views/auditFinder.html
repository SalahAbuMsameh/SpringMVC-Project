<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<div th:fragment="content">
		<div>
			<h2 class="form-signin-heading">Audit Finder</h2><br/>
			
			<form id="audit-finder-form" action="#" th:action="@{/audit-finder}" th:object="${auditFinderFB}" method="post">
			
				<div th:if="${#fields.hasErrors('global')}" class="alert alert-danger alert-dismissable">
			    	<a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
			    	<p th:errors="*{global}">Error</p>
			  	</div>
				
				<div class="row">
			  		<div class="col-sm-4">
			  			<label class="required" for="service" th:text="#{label.service}">Service</label>
						<select id="service" class="form-control" th:field="*{serviceId}">
						    <option th:each="srv : ${services}" th:value="${srv.serviceId}" th:text="${srv.serviceName}"/>
					    </select>
						<p style="color: red;" th:if="${#fields.hasErrors('serviceId')}" th:errors="*{serviceId}">Invalid service value</p>
			  		</div>
			  		<div class="col-sm-4">
			  			<label th:text="#{label.payloadType}">Payload Type</label>
				      	<select id="payloadType" class="form-control" th:field="*{payloadType}">
				      		<option value="0">--- Select Payload Type ---</option>
						    <option th:each="payload : ${payloadTypes}" th:value="${payload.payloadId}" th:text="${payload.desc}"/>
					    </select>
			  		</div>
			  	</div>
			  	
			  	<div class="row">
			  		
			  		<div class="col-sm-4">
			  			<div class="form-group">
			  				<label th:text="#{label.channelKey}">Channel Key</label>
					    	<select id="payloadType" class="form-control" th:field="*{channelKey}">
					    		<option value="">--- Select Channel ---</option>
					        	<option th:value="WDP">Warba Digital Platform (WDP)</option>
						        <option th:value="RIB">Retail Internet Banking (RIB)</option>
						        <option th:value="CIB">Corporate Internet Banking (CIB)</option>
						        <option th:value="SharePoint">SharePoint</option>
						        <option th:value="VBM">Virtual Branch Machine (VBM)</option>
				      		</select>
					  	</div>
			  		</div>
			  		
			  		<div class="col-sm-4">
			  			<div class="form-group">
					    	<label th:text="#{label.date}">Date</label>
					    	<input type="text" id="datepicker" class="form-control" th:field="*{date}"/>
					  	</div>
			  		</div>
			  		
			  	</div>
			  	
			  	<hr/>
			  	
			  	<div class="row">
			  		<div class="col-sm-4">
			  			<div class="form-group">
					    	<label for="trxId" th:text="#{label.trx.id}">Transaction Id</label>
					    	<input type="text" id="trxId" class="form-control" th:field="*{auditTrxId}"/>
					  	</div>
			  		</div>
			  		<div class="col-sm-4">
			  			<div class="form-group">
					    	<label for="Phrase" th:text="#{label.phrase}">Phrase</label>
					    	<input type="text" id="Phrase" class="form-control" th:field="*{phrase}"/>
					  	</div>
			  		</div>
			  	</div>

			  	<button type="submit" class="btn btn-primary" th:text="#{button.search}">Search</button>

			  	<hr/>

			  	<div class="result">
			  		<div th:unless="${payloads}">
					   	<div class="alert alert-danger">No result found.</div>
					</div>
					<!-- ELSE -->
					<div th:if="${payloads}">
					   	<table id="payloads-result-table" class="table table-condensed">
					  		<thead>
					  			<tr>
					  				<th th:text="#{label.id}">ID</th>
					  				<th th:text="#{label.trx.id}">Trx Id</th>
					  				<th th:text="#{label.service}">Service</th>
					  				<th th:text="#{label.payloadType}">Payload Type</th>
					  				<th th:text="#{label.channelKey}">Channel Key</th>
					  				<th th:text="#{label.date}">Date</th>
					  			</tr>
					  		</thead>
					  		<tbody>
					  			<tr th:each="payload : ${payloads}">
									<td th:text="${payload.auditPayloadId}"></td>
									<td th:text="${payload.auditTrxId}"></td>
									<td th:text="${payload.serviceId}"></td>
									<td th:text="${payload.payloadType}"></td>
									<td th:text="${payload.channelKey}"></td>
									<td th:text="${payload.date}"></td>
								</tr>
					  		</tbody>
					  	</table>
					</div>
			  	</div>
				
			</form>
			
			<!-- payload details dialog -->
			<div id="payload-dialog" title="Payload Details">
				
				<div class="row">
					<div id="trx-id-dialog-field" class="col-sm-4">
						<strong>Transaction Id</strong><br />
						<span>id</span>
					</div>
					<div id="service-dialog-field" class="col-sm-4">
						<strong>Service</strong><br />
						<span>service</span>
					</div>
					<div id="payload-type-dialog-field" class="col-sm-4">
						<strong>Payload Type</strong><br />
						<span>payload type</span>
					</div>
				</div>
				
				<div class="row">
					<div id="channel-key-dialog-field" class="col-sm-4">
						<strong>Channel Key</strong><br />
						<span>channel key</span>
					</div>
					<div id="date-dialog-field" class="col-sm-4">
						<strong>Date</strong><br/>
						<span>date</span>
					</div>
				</div>
				
				<hr />
				
				<div class="form-group">
					<label for="comment">Payload</label>
				 	<textarea id="payload-content" class="form-control code" rows="10"></textarea>
				</div> 
			</div>
			
		</div>
	</div>
</html>